---
# tasks file for rpsetup:bind

- name: BIND - Install/Update apt package
  apt:
    name: bind9
  when: inventory_hostname in groups['bind']


- name: BIND - Enable Service
  service:
    name: bind9
    enabled: yes
  when: inventory_hostname in groups['bind']


- name: BIND - Create conf.local file from a template
  template:
    src: etc/bind/named.conf.local
    dest: /etc/bind/named.conf.local
    owner: root
    group: root
    mode: 0644
  notify: BIND Restart
  when: inventory_hostname in groups['bind']


- name: BIND - Create conf.options file from a template
  template:
    src: etc/bind/named.conf.options
    dest: /etc/bind/named.conf.options
    owner: root
    group: root
    mode: 0644
  notify: BIND Restart
  when: inventory_hostname in groups['bind']


- name: BIND - Create Internal Zone file from template
  template:
    src: etc/bind/zones/db.home
    dest: /etc/bind/zones/db.home
    owner: root
    group: root
    mode: 0644
  notify: BIND Restart
  when: inventory_hostname in groups['bind']

- name: BIND - Create External Zone file from template
  template:
    src: etc/bind/zones/db.findley.pm
    dest: /etc/bind/zones/db.findley.pm
    owner: root
    group: root
    mode: 0644
  notify: BIND Restart
  when: inventory_hostname in groups['bind']

- name: BIND - Create PTR Zone file from template
  template:
    src: etc/bind/zones/db.0.0.10
    dest: /etc/bind/zones/db.0.0.10
    owner: root
    group: root
    mode: 0644
  notify: BIND Restart
  when: inventory_hostname in groups['bind']